---
title: "Arkansas Covid"
author: "Rob Wells"
date: "6/22/2020"
output: html_document
---

# Analyzing Arkansas Covid Data
### Data analysis by Rob Wells


- **The records come from this website**  

https://arkansascovid.com/

Using this sheet:
https://docs.google.com/spreadsheets/d/17M92KbKw1nIOD_co11hN_B0o4AmAW2zs1Nb3QGeDl-I/edit?usp=sharing

--------------------------------------------------------------------
# Part 1: Fix the data structure

```{r include=FALSE}
library(tidyverse)
library(janitor)
library(lubridate)
#install.packages("googledrive")
#install.packages("googlesheets4")
library(googlesheets4)
library("googledrive")
library(tidyr)
# vignette("basic-usage", package="googlesheets")
```




```{r}
url <- ("https://docs.google.com/spreadsheets/d/17M92KbKw1nIOD_co11hN_B0o4AmAW2zs1Nb3QGeDl-I/edit#gid=1357388768")

covid <- read_sheet(url, sheet="BeAll")
```

- **Plan B: You may need to copy this Google sheet to your own Google account and then load that URL on to Line 38 above**
https://docs.google.com/spreadsheets/d/17M92KbKw1nIOD_co11hN_B0o4AmAW2zs1Nb3QGeDl-I/edit#gid=1357388768


- **Clean Names**
```{r}

covid <- janitor::clean_names(covid)
```

**Examine the Data Fields**
```{r}
glimpse(covid)
```

- **Simplify: Get a subset table**
```{r}
cases <- covid %>% 
  select(county, date, current_infections, new_cases_today)
head(cases)
```

- **Filter: Just the state totals**

```{r}
state <- cases %>% 
  select(county, date, current_infections, new_cases_today) %>% 
  filter(county=="Arkansas (All counties)") 
head(state)
```

- **Graph state totals**

```{r}
ggplot(state, aes(x = date, y = new_cases_today, fill=new_cases_today)) + 
  geom_bar(stat = "identity", show.legend = FALSE) +
  #geom_text(aes(label = new_cases_today), hjust = -.1, size = 2.2) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "Arkansas: New Covid-19 Cases Per Day", 
       subtitle = "Source: Arkansascovid.com",
       caption = "Graphic by Wells",
       y="New cases per day",
       x="Date")

#ggsave("/Users/rswells/Dropbox/Classes/Data Fall 2020/CovidFall2020/Xx.png",device = "png",width=9,height=6, dpi=800)
```

- **Your Turn**

      Build a table with deaths by state 
      Build a table with new cases and deaths by state
      Build a table with news cases and deaths by Washington County

**--30--**
